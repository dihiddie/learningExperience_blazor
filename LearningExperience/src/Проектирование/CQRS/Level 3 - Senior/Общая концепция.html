<p>Шаблон <b>Command-Query Separation (CQS)</b> предлагает разделение работы с объектом (и это не обязательно база данных) на Запросы (Query) и Команды (Commands). При этом необходимо соблюдать следующие правила:</p>
<ul>
    <li>Запросы возвращает данные и, что важно, никогда не меняют состояние объекта;</li>
    <li>Команды изменяют состояние объекта, но, в идеальном случае, не должны ничего возвращать.</li>
</ul>
<p>Необходимо отметить, что в некоторых случаях CQS не может быть использован в принципе. В качестве примеров можно рассмотреть реализации алгоритмов стек и очередь. Их методы Pop() и Dequeue() по определению должны и возвращать данные и изменять состояние самого объекта. Кроме того, в случае многопоточного программирования иногда удобнее иметь методы, противоречащие принципам CQS.</p>
<p>В случае применения данного принципа для работы с источниками данных используется термин <b> Command-Query Responsibility Segregation (CQRS)</b>. По сути это синоним, уточняющий область применения. CQRS несет в себе все принципы CQS и не ограничивает способ хранения данных. Это может быть СУБД, массив в памяти и т. д.</p>
<img src="https://hsto.org/storage2/29b/4ed/1ff/29b4ed1ff1c93ba3efa85bf95d60ed55.png">
<p>Используя CQRS в реальном приложении, можно добиться того, что бизнес-логика не будет ничего знать про тип источника данных. Она будет оперировать только Запросами и Командами. При правильном подходе, это может существенно упростить создание и дальнейшее сопровождение приложения. В завершении этой части необходимо сказать, что CQS/CQRS не ограничиваются способы их реализации. Это могут быть методы одного объекта или отдельные классы, как в примере выше. Возможно использовать совместно интерфейсы, абстракции, IoC и прочие техники и шаблоны.</p>
<p>Принципы CQRS очень хорошо подходят для реализации по протоколу HTTP. Спецификация HTTP четко говорит GET-запросы должны возвращать данные с сервера. POST, PUT, PATCH – изменять состояние. Хорошим тоном в web-программировании считается редирект на GET после выполнения POST-операции, например, сабмита формы.
        <br>        
        GET– это Query
        <br>        
        POST/PUT/PATCH/DELETE – это Command</p>