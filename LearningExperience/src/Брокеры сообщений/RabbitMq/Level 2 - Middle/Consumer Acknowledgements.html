<p>Системы, использующие брокера обмена сообщениями, например RabbitMQ, по определению являются распределенными. Поскольку отправленные методы протокола (сообщения) не гарантируют, что они достигнут однорангового узла или будут успешно обработаны им, как издателям, так и потребителям необходим механизм для подтверждения доставки и обработки. Некоторые протоколы обмена сообщениями, поддерживаемые RabbitMQ, предоставляют такие функции. В этом руководстве рассматриваются функции AMQP 0-9-1, но в других поддерживаемых протоколах идея во многом такая же.</p>
<p>Они необходимы для надежной доставки как от издателей на узлы RabbitMQ, так и от узлов RabbitMQ потребителям. Другими словами, они необходимы для безопасности данных, за которую приложения несут ответственность не меньше, чем узлы RabbitMQ.</p>

<h6>Настройка консюмера</h6>
<ul>
    <li><b>ack</b> удалит сообщение из очереди даже если настроен DLX</li>
    <hr>
    <p>basic.nack выглядит как расширение RabbitMq над basic.reject для включения режима массовой обработки. У обоих есть флажок типа бул "переположить в очередь (requeue)", так что тут получается несколько вариантов:</p>
    <li><b>nack/reject, requeue=1</b> сообщение будет возвращено в очередь, из которой оно пришло, как если бы это было новое сообщение; это может быть полезно в случае временного сбоя на стороне потребителя</li>
    <li><b>nack/reject, requeue=0 и DLX настроен</b> - опубликует сообщение в DLX, что позволит обработать его другой очередью</li>
    <li><b>nack/reject, requeue=0 и DLX не настроен</b> просто отклонит сообщение</li>    
</ul>

<p>Источник: <a href="https://www.rabbitmq.com/confirms.html#basics">https://www.rabbitmq.com/confirms.html#basics</a></p>
