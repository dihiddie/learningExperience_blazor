<p>Память, занятая неиспользуемыми объектами, должна освобождаться. Этот процесс выполняется средой CLR автоматически и называется сборкой мусора. Однако помимо управляемой памяти существуют и другие машинные ресурсы, которые может использовать программа: файлы, дескрипторы ОС, сетевые подключения и т.д. Эти ресурсы сборщиком мусора не освобождаются. Типы, инкапсулирующие работу с машинными ресурсами, должны освобождать эти ресурсы после завершения работы с ними самостоятельно. Освобождение реализуется с помощью интерфейса IDisposable. Освобождение вызывается явно, в то время как сборка мусора полностью автоматизирована и не требует никаких действий со стороны программиста.</p>
<br>
<h4>Автоматическая сборка мусора</h4>
<p>Независимо от того, требует ли объект освобождения используемых машинных ресурсов, память, занимаемая им в хипе, должна быть освобождена. Среда CLR делает это автоматически с помощью автоматического сборщика мусора. Самостоятельно освобождать управляемую память не требуется.</p>
<p>Сборка мусора не происходит немедленно после того, как объект становится недоступным. Она выполняется периодически: среда CLR основывает свое решение о том, когда нужно провести сборку мусора, на ряде факторов: объем доступной памяти и время прошедшее с последней сборки мусора. Поэтому между моментом, когда объект становится недоступным, и моментом, когда занимаемая им память будет освобождена, имеется неопределенная задержка: от наносекунд до нескольких дней.
<br>Сборщик мусора не собирает весь мусор при каждой сборке. Вместо этого диспетчер памяти разделяет объекты на поколения, и сборщик мусора выполняет сборку новых поколений (недавно распределенных объектов) чаще, чем старых поколений (объектов, существующих на протяжении длительного времени).</p>
<br>
<h4>Корни (Roots)</h4>
<p>Корень (корневой объект) — это то, что сохраняет объект в активном состоянии, если на объект нет прямой или косвенной ссылки со стороны корня, он будет доступен для сборки мусора. Корнем может выступать:</p>
<ul>
    <li>локальная переменная или параметр в выполняющемся методе</li>
    <li>статическая переменная</li>
    <li>объект в очереди на финализацию</li>
</ul>
<p>Объекты, циклически ссылающиеся друг на друга, считаются недостижимыми если на них отсутствует ссылка из корня.</p>

<h4>Поколения</h4>
<p>Идея поколений основывается на том, что некоторые объекты имеют краткий жизненный цикл, другие же существуют длительное время и отслеживать их при каждой сборке мусора необязательно. Сборщик мусора делит хип на три поколения. Недавно созданные объекты относятся к поколению Gen0, объекты выдержавшие один цикл сборки мусора — к поколению Gen1, а все остальные объекты принадлежат к поколению Gen2.
<br>Для поколения Gen0 среда CLR выделяет относительно небольшой участок памяти (16Мб). Когда эта память заканчивается, инициируется сборка мусора для поколения Gen0, что происходит довольно часто. Для поколения Gen1 используется похожий лимит памяти, поэтому сборка мусора для Gen1 тоже происходит довольно часто. Полная же сборка мусора, включающая поколение Gen2, является довольно медленной и происходит редко.</p>
