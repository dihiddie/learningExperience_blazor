<p>Триггеры представляют специальный тип хранимой процедуры, которая вызывается автоматически при выполнении определенного действия над таблицей или представлением, в частности, при добавлении, изменении или удалении данных, то есть при выполнении команд INSERT, UPDATE, DELETE. </p>
<pre>
    CREATE TRIGGER имя_триггера
    ON {имя_таблицы | имя_представления}
    {AFTER | INSTEAD OF} [INSERT | UPDATE | DELETE]
    AS выражения_sql</pre>
<p>Для триггера <b>AFTER</b> можно применять сразу для нескольких действий, например, UPDATE и INSERT. В этом случае операции указываются через запятую. Для триггера <b>INSTEAD OF</b> можно определить только одно действие.</p>
<p>Триггеры можно <b>отключать</b></p>
<ul>
    <li>Добавление</li>
    <p>При добавлении данных (при выполнении команды INSERT) в триггере мы можем получить добавленные данные из виртуальной таблицы INSERTED.</p>
    <li>Удаление</li>
    <p>При удалении все удаленные данные помещаются в виртуальную таблицу DELETED</p>
    <li>Изменение данных</li>
    <p>Триггер обновления данных срабатывает при выполнении операции UPDATE. И в таком триггере мы можем использовать две виртуальных таблицы. Таблица INSERTED хранит значения строк после обновления, а таблица DELETED хранит те же строки, но до обновления</p>    
</ul>
<h5>INSTEAD OF</h5>
<p>Триггер INSTEAD OF срабатывает вместо операции с данными. Он определяется в принципе также, как триггер AFTER, за тем исключением, что он может определяться только для одной операции - INSERT, DELETE или UPDATE. <i>И также он может применяться как для таблиц, так и для представлений (триггер AFTER применяется только для таблиц)</i>.</p>
<p>Например, вместо жесткого удаления полностью из базы данных мы хотим выполнить мягкое удаление, при котором запись остается в базе данных.</p>
<pre>USE prods
    GO
    CREATE TRIGGER products_delete
    ON Products
    INSTEAD OF DELETE
    AS
    UPDATE Products
    SET IsDeleted = 1
    WHERE ID =(SELECT Id FROM deleted)</pre>